(function(t){function e(e){for(var n,o,i=e[0],c=e[1],l=e[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,i=1;i<s.length;i++){var c=s[i];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},r={app:0},a=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},"0a6c":function(t,e,s){},"313e":function(t,e,s){},"3f39":function(t,e,s){"use strict";s("cd26")},"43cd":function(t,e,s){"use strict";s("313e")},"4f7c":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),r=(s("d3b7"),s("bc3a")),a=s.n(r),o={},i=a.a.create(o);i.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=i,window.axios=i,Object.defineProperties(t.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},n["a"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},l=[],u={name:"App",components:{}},d=u,h=(s("034f"),s("2877")),f=Object(h["a"])(d,c,l,!1,null,null,null),p=f.exports,_=s("8c4f"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home-page"},[t._m(0),s("div",{attrs:{id:"body"}},[s("searchArtists"),s("br"),s("br"),this.chosen_artist_count>0?s("div",{attrs:{id:"playlist"}},[s("getPlaylist")],1):t._e(),this.topTracks_count>0?s("div",{attrs:{id:"playlist"}},[s("doPlaylist")],1):t._e()],1),s("div",{attrs:{id:"bottom"}},[s("footerSection")],1)])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"header"}},[s("h1",[t._v("ðŸŽ¶flute salad ðŸ¥—")]),s("h2",[t._v("Discover new songs based on your favorite artists.")])])}],v=(s("c975"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=this.finalTracks.length?s("div",{attrs:{id:"track-list"}},[0==this.clicked?s("div",[s("button",{staticClass:"load-more-btn",attrs:{type:"submit"},on:{click:function(e){return t.savePlaylist()}}},[s("p",[t._v('Save "'+t._s(this.playlistName)+'"" to Spotify')])])]):t._e(),1==this.clicked?s("div",[t._m(0)]):t._e(),t._m(1),t._l(this.finalTracks,(function(e,n){return s("tr",{key:n,staticClass:"song"},[s("th",[s("a",{staticClass:"play-button",attrs:{target:"_blank",href:e.external_urls.spotify}},[t._v("â–º")])]),s("th",[s("img",{attrs:{src:e.album.images[2].url,width:"64",height:"64"}})]),s("th",[t._v(" "+t._s(e.name)+" ")]),s("th",[t._v(" "+t._s(e.album.artists[0].name)+" ")]),s("th",[t._v(" "+t._s(e.album.name)+" ")])])}))],2):t._e()}),k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"loaded-more-btn",attrs:{type:"submit",disabled:""}},[s("p",[t._v("Playlist saved.")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th"),s("th"),s("th",[t._v("TITLE")]),s("th",[t._v("ARTIST")]),s("th",[t._v("ALBUM")])])}],y=(s("a623"),s("b0c0"),{props:[],name:"doPlaylist",components:{},created:function(){},data:function(){return{condensedTopTrack:[],finalTracks:[],finalTracksId:[],clicked:0,playlistName:""}},watch:{doPlaylist:{immediate:!0,handler:function(){if(1==this.doPlaylist){for(var t=this.condensedTopTrack.length;t<this.topTracks.length;t++)this.cutTopTracksForEachArtist(t);this.playlistName="Flute Salad Mix: "+this.chosen_artists[0].name,this.makePlaylist(),this.$store.commit("disable_doPlaylist")}}}},computed:{chosen_artists:function(){return this.$store.getters.get_chosen_artists},accessToken:function(){return this.$store.getters.get_access_token},related_artists:function(){return this.$store.getters.get_related_artists},topTracks:function(){return this.$store.getters.get_topTracks},topTracks_count:function(){return this.$store.getters.get_topTracks_count},doPlaylist:function(){return this.$store.getters.get_doPlaylist}},methods:{savePlaylist:function(){var t,e=this;this.clicked=1,n["a"].axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+this.accessToken}}).then((function(s){t=s.data.id;var r={name:e.playlistName,description:"Playlist created with Flute Salad."},a={headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.accessToken}};n["a"].axios.post("https://api.spotify.com/v1/users/".concat(t,"/playlists"),JSON.stringify(r),a).then((function(t){var s=t.data.id;n["a"].axios.post("https://api.spotify.com/v1/playlists/".concat(s,"/tracks"),e.finalTracksId,a).then((function(t){console.log("added to playlist",t)})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},makePlaylist:function(){var t=this,e=0;while(e<50)for(var s=0;s<this.condensedTopTrack.length;s++)if(0!=this.condensedTopTrack[s].length){var r=this.condensedTopTrack[s].shift();this.finalTracksId.push("spotify:track:"+r),n["a"].axios.get("https://api.spotify.com/v1/tracks/".concat(r),{headers:{Authorization:"Bearer "+this.accessToken}}).then((function(e){t.finalTracks.push(e.data)})).catch((function(t){console.log(t)})),e++}else if(this.condensedTopTrack[s].every((function(t,e,s){return t===s[0]}))){e=50;break}},cutTopTracksForEachArtist:function(t){this.condensedTopTrack[t]=[];var e=!0;while(this.condensedTopTrack[t].length<50&&e)for(var s=0;s<this.topTracks[t].length;s++){if(this.condensedTopTrack[t].length>50||!e)break;for(var n=0;n<3;n++){if(0==this.topTracks[t][s].length||this.condensedTopTrack[t].length>50){e=!1;break}this.condensedTopTrack[t].push(this.topTracks[t][s].shift())}}}}}),T=y,b=(s("f7f3"),Object(h["a"])(T,v,k,!1,null,"42ed25a2",null)),P=b.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"search-menu"}},[this.chosen_artists.length<1?s("input",{directives:[{name:"model",rawName:"v-model",value:t.input_content,expression:"input_content"}],attrs:{placeholder:"Search by Artist"},domProps:{value:t.input_content},on:{keyup:t.searchArtists,input:function(e){e.target.composing||(t.input_content=e.target.value)}}}):s("input",{attrs:{placeholder:"Maximum amount of Artists",disabled:""}}),""!=this.input_content?s("div",{staticClass:"search-suggestions"},[s("ul",t._l(t.search_suggestions,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.addArtist(e)}}},[s("span",[t._v(t._s(e.name))])])})),0)]):t._e(),t.chosen_artists.length>0?s("div",{attrs:{id:"current_artists"}},[s("ul",t._l(t.chosen_artists,(function(e,n){return s("li",{key:n},[t._v(" "+t._s(e.name)+" "),s("span",{staticClass:"remove-artist",on:{click:function(e){return t.removeArtist(n)}}},[t._v("âœ•")])])})),0)]):t._e(),s("br")])},w=[],x={props:[""],name:"searchArtists",components:{},created:function(){},computed:{chosen_artists:function(){return this.$store.getters.get_chosen_artists},accessToken:function(){return this.$store.getters.get_access_token}},data:function(){return{input_content:"",search_suggestions:[]}},methods:{searchArtists:function(){var t=this;""!=t.input_content&&n["a"].axios.get("https://api.spotify.com/v1/search?q=".concat(t.input_content,"&type=artist"),{headers:{Authorization:"Bearer "+t.accessToken}}).then((function(e){t.search_suggestions=e.data.artists.items})).catch((function(t){console.log(t)}))},addArtist:function(t){for(var e=this,s=!1,n=0;n<e.chosen_artists.length;n++)if(e.chosen_artists[n].name==t.name){s=!0;break}e.chosen_artists.length<5&&(s?(e.input_content="",console.log("no duplicates")):(this.$store.commit("add_artist",t),e.input_content=""))},removeArtist:function(t){this.$store.commit("remove_artist",t),this.$store.commit("remove_related_artists",t),this.$store.commit("remove_topTracks",t)}}},A=x,S=(s("3f39"),Object(h["a"])(A,$,w,!1,null,"597e97c8",null)),j=S.exports,O=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},E=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"track-list"}},[s("br"),s("br"),s("br"),s("br")])}],R={props:[],name:"getPlaylist",components:{},created:function(){null!=this.accessToken||console.log("ooooof")},data:function(){return{fileredTopTracksForRelated:[],offset:0}},watch:{chosen_artists:{immediate:!0,deep:!0,handler:function(){for(var t=this,e=t.related_artists.length,s=e;s<t.chosen_artists.length;s++)t.getRelatedArtists(s)}},related_artists_length:{deep:!0,handler:function(){for(var t=this,e=0;e<t.related_artists.length;e++){this.fileredTopTracksForRelated[e]=[];for(var s=0;s<t.related_artists[e].length;s++)this.fileredTopTracksForRelated[e][s]=[],t.getTopTracks(e,s)}}}},computed:{chosen_artists:function(){return this.$store.getters.get_chosen_artists},accessToken:function(){return this.$store.getters.get_access_token},related_artists:function(){return this.$store.getters.get_related_artists},related_artists_length:function(){return this.$store.getters.get_related_artists_count},topTracks:function(){return this.$store.getters.get_topTracks}},methods:{loadMore:function(){this.offset+=50,this.displaySongs()},getTopTracks:function(t,e){var s=this,r=this,a=this.related_artists[t][e];n["a"].axios.get("https://api.spotify.com/v1/artists/".concat(a,"/top-tracks?country=US"),{headers:{Authorization:"Bearer "+r.accessToken}}).then((function(n){var a=[];for(var o in n.data.tracks)a.push(n.data.tracks[o].id);s.fileredTopTracksForRelated[t][e]=a,s.$store.commit("add_topTracks",[t,s.fileredTopTracksForRelated[t]]),e==r.related_artists[t].length-1&&s.$store.commit("enable_doPlaylist")})).catch((function(s){console.log(t,",",e,":   ",s)}))},getRelatedArtists:function(t){var e=this,s=this,r=s.chosen_artists[t].id;n["a"].axios.get("https://api.spotify.com/v1/artists/".concat(r,"/related-artists"),{headers:{Authorization:"Bearer "+s.accessToken}}).then((function(s){var n=[];for(var r in s.data.artists)n.push(s.data.artists[r].id);e.$store.commit("add_related_artists",[t,n])})).catch((function(t){console.log(t)}))}}},C=R,F=(s("43cd"),Object(h["a"])(C,O,E,!1,null,"338cbb99",null)),z=F.exports,B=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},M=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"footerSection"}},[s("hr"),s("a",{attrs:{target:"_blank",href:"https://www.kurthiga.com"}},[t._v("Â©2020 Kurt Higa")])])}],I={props:[""],name:"footerSection",components:{},created:function(){},data:function(){return{}}},L=I,N=(s("dcc5"),Object(h["a"])(L,B,M,!1,null,"a1bcf0c8",null)),q=N.exports,J={name:"Home",components:{getPlaylist:z,doPlaylist:P,searchArtists:j,footerSection:q},data:function(){return{responseData:null}},created:function(){this.setAccessToken()},computed:{chosen_artist_count:function(){return this.$store.getters.get_chosen_artists_count},related_artists_count:function(){return this.$store.getters.get_chosen_artists_count},topTracks_count:function(){return this.$store.getters.get_topTracks_count}},methods:{setAccessToken:function(){var t=window.location.hash.substring(1),e=t.indexOf("&"),s=t.substring(13,e);this.$store.commit("assign_access_token",s)}}},U=J,D=(s("d446"),Object(h["a"])(U,g,m,!1,null,"20c77c63",null)),H=D.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"start"},[n("h1",[t._v("ðŸŽ¶flute salad ðŸ¥—")]),n("h2",[t._v("Analyze your music taste and discover similar music.")]),n("button",{staticClass:"login-btn",attrs:{type:"submit"},on:{click:function(e){return t.sendRequest()}}},[n("img",{attrs:{src:s("eef6")}}),n("p",[t._v("Login with Spotify")])])])},K=[],W=(s("99af"),s("a15b"),s("13d5"),s("ac1f"),s("1276"),{name:"Start",components:{},data:function(){return{}},methods:{sendRequest:function(){var t=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var s=e.split("=");t[s[0]]=decodeURIComponent(s[1])}return t}),{});window.location.hash="";var e=t.access_token,s="https://accounts.spotify.com/authorize",n="75c9efa0c2154fea87c9a3ae844de53e",r="http://localhost:8080/home",a=["user-library-read","user-library-modify","user-top-read","user-read-recently-played","playlist-read-private","playlist-read-collaborative","user-modify-playback-state","user-follow-read","playlist-modify-public","playlist-modify-private"];e||(window.location="".concat(s,"?client_id=").concat(n,"&redirect_uri=").concat(r,"&scope=").concat(a.join("%20"),"&response_type=token"))}}}),Q=W,V=(s("6c45"),Object(h["a"])(Q,G,K,!1,null,"ce84caaa",null)),X=V.exports;n["a"].use(_["a"]);var Y=[{path:"/",component:X},{path:"/home",component:H}],Z=new _["a"]({mode:"history",routes:Y}),tt=Z,et=(s("a434"),s("2f62"));n["a"].use(et["a"]);var st=new et["a"].Store({state:{chosen_artists:[],related_artists:[],related_artists_length:0,topTracks:[],topTracksLength:0,accessToken:"",doPlaylist:0},mutations:{enable_doPlaylist:function(t){t.doPlaylist=1},disable_doPlaylist:function(t){t.doPlaylist=0},add_artist:function(t,e){t.chosen_artists.push(e)},remove_artist:function(t,e){t.chosen_artists.splice(e,1)},add_related_artists:function(t,e){var s=e[0],n=e[1];t.related_artists.splice(s,1,n),t.related_artists_length=t.related_artists.length},remove_related_artists:function(t,e){t.related_artists.splice(e,1),t.related_artists_length=t.related_artists.length},add_topTracks:function(t,e){var s=e[0],n=e[1];t.topTracks.splice(s,1,n),t.topTracksLength=t.topTracks.length},remove_topTracks:function(t,e){t.topTracks.splice(e,1),t.topTracksLength=t.topTracks.length},assign_access_token:function(t,e){t.accessToken=e},reset_related_artists:function(t){t.related_artists=[]}},getters:{get_doPlaylist:function(t){return t.doPlaylist},get_chosen_artists:function(t){return t.chosen_artists},get_chosen_artists_count:function(t){return t.chosen_artists.length},get_related_artists:function(t){return t.related_artists},get_related_artists_count:function(t){return t.related_artists_length},get_topTracks:function(t){return t.topTracks},get_topTracks_count:function(t){return t.topTracksLength},get_access_token:function(t){return t.accessToken}},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:tt,store:st,render:function(t){return t(p)}}).$mount("#app")},6400:function(t,e,s){},"6c45":function(t,e,s){"use strict";s("6400")},"85ec":function(t,e,s){},cd26:function(t,e,s){},d446:function(t,e,s){"use strict";s("e5cd")},dcc5:function(t,e,s){"use strict";s("0a6c")},e5cd:function(t,e,s){},eef6:function(t,e,s){t.exports=s.p+"img/Spotify_Icon_RGB_White.cc4e2784.png"},f7f3:function(t,e,s){"use strict";s("4f7c")}});
//# sourceMappingURL=app.4ae2f061.js.map